<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ayushmaan's Projects</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.6.1/nouislider.min.css">
    <link rel="icon" type="image/x-icon" href="{{url_for('static',filename='images/favicon.png')}}">
    <link rel="stylesheet" href="{{url_for('static',filename='css/styles.css')}}" />
    <link rel="stylesheet" href="{{url_for('static',filename='css/notes.css')}}" />
    <link rel="stylesheet" href="{{url_for('static',filename='css/loading.css')}}" />

</head>

<body class="d-flex flex-column min-vh-100">
    <div class="social-banner">
        <a href="https://www.github.com/ayushmaanFCB" target="_blank">
            <img src="https://img.icons8.com/ios-filled/50/FFFFFF/github.png" alt="GitHub Icon">
        </a>
        <a href="https://www.linkedin.com/in/ayushmaan-das-635ab621a/" target="_blank">
            <img src="https://img.icons8.com/ios-filled/50/FFFFFF/linkedin.png" alt="LinkedIn Icon">
        </a>
    </div>

    <div id="loading">
        <div class="center">
            <div class="wave"></div>
            <div class="wave"></div>
            <div class="wave"></div>
            <div class="wave"></div>
            <div class="wave"></div>
            <div class="wave"></div>
            <div class="wave"></div>
            <div class="wave"></div>
            <div class="wave"></div>
            <div class="wave"></div>
        </div>
    </div>

    <div id="main-content">
        <nav class="navbar navbar-expand-lg navbar-dark bg-transparent">
            <div class=" container">
                <a class="navbar-brand" href="/">
                    <img src="{{url_for('static',filename='images/logo.png')}}" alt="Logo" height="60"
                        class="d-inline-block align-text-top">
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas"
                    data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="sidebar offcanvas offcanvas-start" tabindex="-1" id="offcanvasNavbar"
                    aria-labelledby="offcanvasNavbarLabel">
                    <div class="offcanvas-header text-white">
                        <h5 class="offcanvas-title" id="offcanvasNavbarLabel">Hello, take a look at my profile</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                    </div>
                    <div>
                        <img id="profile1" src="{{url_for('static',filename='images/profile1.png')}}" class="img-fluid"
                            alt="..." style="padding: 3rem; padding-top: 5rem">
                    </div>
                    <div class="offcanvas-body d-flex flex-column p-4">
                        <ul class="navbar-nav justify-content-end align-items-center fs-6 flex-grow-1 pe-3">
                            <li class="nav-item mx-2">
                                <a class="nav-link active" aria-current="page" href="/projects">
                                    <i class="bi bi-kanban me-1 fs-6"></i> Projects
                                </a>
                            </li>
                            <li class="nav-item mx-2">
                                <a class="nav-link active" href="/skills">
                                    <i class="bi bi-tools me-1 fs-6"></i> Skills
                                </a>
                            </li>
                            <li class="nav-item mx-2">
                                <a class="nav-link active" href="/contact">
                                    <i class="bi bi-envelope me-1 fs-6"></i> Contact
                                </a>
                            </li>
                            <li class="nav-item mx-2">
                                <a class="nav-link active" href="/resume">
                                    <i class="bi bi-file-earmark-person me-1 fs-6"></i> Resume
                                </a>
                            </li>
                            <li class="nav-item mx-2">
                                <a class="nav-link active special-link" href="/notes">
                                    <i class="bi bi-lightbulb me-1 fs-6"></i> Knowledge Base
                                </a>
                            </li>
                            <li class="nav-item mx-2">
                                <a class="nav-link active special-link" href="/blog">
                                    <i class="bi bi-journal-text me-1 fs-6"></i> Blogs
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </nav>

        <div class="container mt-4">
            <div class="d-flex justify-content-between align-items-center flex-wrap mb-3">
                <!-- Upcoming Notes Banner -->
                {% if upcoming_notes%}
                <div class="news-section flex-grow-1 me-3 p-2">
                    <span class="banner-title">Upcoming Notes:</span>
                    <div class="scroll-mask">
                        <div class="scrolling-content">
                            {% for upcoming in upcoming_notes %}
                            <span class="upcoming-item">{{ upcoming.title }}</span>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                {% endif %}

                <!-- Tag Search Box -->
                <div class="search-box">
                    <input type="text" id="tagSearch" class="form-control" placeholder="Search for materials">
                </div>
            </div>
        </div>

        <div class="container" style="padding: 2rem 1rem;">
            <div class="row justify-content-center">
                {% for note in notes %}
                <div class="col-md-4 col-sm-6 mb-4">
                    <div class="note-card" onclick="window.open('{{ note.notion_url }}', '_blank')">
                        <div class="note-thumbnail" style="background-image: url('{{ note.thumbnail }}');">
                            <div class="note-overlay">
                                <div class="note-title">{{ note.title }}</div>
                                <div class="note-description">{{ note.description }}</div>
                                <div class="note-tags mt-2">
                                    {% for tag in note.tags %}
                                    <span class="badge me-1 small" style="background-color:yellow; color:black">{{ tag
                                        }}</span>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>

        {% if upcoming_notes%}
        <!-- Floating Button (Only visible on Mobile) -->
        <div class="show-upcoming-btn d-md-none" data-bs-toggle="modal" data-bs-target="#upcomingModal">ðŸ“¢</div>

        <!-- Bootstrap Modal -->
        <div class="modal fade" id="upcomingModal" tabindex="-1" aria-labelledby="upcomingModalLabel"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content" style="background: rgba(0, 0, 0, 1); color: white;">
                    <div class="modal-header">
                        <h5 class="modal-title" id="upcomingModalLabel">ðŸ“¢ Upcoming Notes</h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                            aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <ul class="list-group">
                            {% for upcoming in upcoming_notes %}
                            <li class="list-group-item bg-dark text-white border-secondary">{{ upcoming.title }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}

    </div>

    <script>
        document.getElementById("tagSearch").addEventListener("input", function () {
            const searchTerm = this.value.toLowerCase();
            const cards = document.querySelectorAll(".note-card");

            cards.forEach(card => {
                const title = card.querySelector(".note-title").textContent.toLowerCase();
                const tags = Array.from(card.querySelectorAll(".badge")).map(tag => tag.textContent.toLowerCase());
                let match = false;

                // âœ… Match if title or any tag contains searchTerm
                if (title.includes(searchTerm) || tags.some(tag => tag.includes(searchTerm))) {
                    match = true;
                }

                if (searchTerm.length >= 3) {
                    if (match) {
                        card.style.opacity = "1";
                        card.style.transform = "scale(1)";
                        card.style.pointerEvents = "auto";
                        card.style.position = "";
                    } else {
                        card.style.opacity = "0";
                        card.style.transform = "scale(0.9)";
                        card.style.pointerEvents = "none";
                        card.style.position = "absolute"; /* removes its space smoothly */
                    }
                } else {
                    // âœ… Reset when search < 3 chars
                    card.style.opacity = "1";
                    card.style.transform = "scale(1)";
                    card.style.pointerEvents = "auto";
                    card.style.position = "";
                }
            });
        });
    </script>
    <script>
        setTimeout(() => {
            const loading = document.getElementById('loading');
            const mainContent = document.getElementById('main-content');

            // Prepare content for fade-in
            mainContent.style.display = 'block';
            mainContent.style.opacity = '0';
            mainContent.style.transition = 'opacity 0.6s ease';

            // Start loader fade out
            loading.style.transition = 'opacity 0.5s ease';
            loading.style.opacity = '0';

            // Simultaneously fade in content slightly after loader starts fading
            setTimeout(() => {
                mainContent.style.opacity = '1';
                loading.style.display = 'none';
            }, 200); // overlap: content starts fading in while loader is still fading out
        }, 1000);
    </script>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

<footer class="mt-auto">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12" id="footer-col">
                <a href="mailto:dasayush5maan@gmail.com" style="padding-right: 1.5rem;">Email</a>
                <a href="https://www.github.com/ayushmaanFCB" target="_blank" style="padding-right: 1.5rem;">GitHub</a>
                <a href="https://www.linkedin.com/in/ayushmaan-das-635ab621a/" style="padding-right: 1.5rem;"
                    target="_blank">LinkedIn</a>
                <a href="tel:+917679622353">Phone</a>
            </div>
        </div>
    </div>
</footer>

</html>